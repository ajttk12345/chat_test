<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Chat Rooms</title>
</head>

<body>
    방 정보 입력<br/>
    방 이름 <br>
    <input id="room-name-input" type="text" size="100"/><br/>
    내 아이디 <br>
    <input id="user-name-input" type="text" size="100" value="user"/><br/>
    <br>
    <input id="room-name-submit" type="button" value="Enter"/>
    
    <script>
        document.querySelector('#room-name-input').focus();
        document.querySelector('#room-name-input').onkeyup = function(e) {
            if (e.keyCode === 13) {  // enter, return
                document.querySelector('#room-name-submit').click();
            }
        };
        document.querySelector('#user-name-input').onkeyup = function(e) {
            if (e.keyCode === 13) {  // enter, return
                document.querySelector('#room-name-submit').click();
            }
        };

        document.querySelector('#room-name-submit').onclick = function(e) {
            var roomName = document.querySelector('#room-name-input').value;
            var userName = document.querySelector('#user-name-input').value;
            var g_oInterval = null;
            var g_oWindow = window.open(
                '/chat/' + roomName + '/' + userName + '/',
                "", "width=740, height=700"
            );
            /*g_oInterval = window.setInterval(function() {
                try {
                    // 창이 꺼졌는지 판단
                    if( g_oWindow == null || g_oWindow.closed ) {
                        window.clearInterval(g_oInterval);
                        g_oWindow = null;
                        // Todo....
                        //.....
                        //alert('창 close');
                    }
                } catch (e) { }
            }, 500);
            */
            
            //window.location.href = '/chat/' + roomName + '/' + userName + '/';
        };
    </script>
</body>
</html>